<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AzDi Runner</title>

<style>
body{
  margin:0;
  background:#1e2f38;
  font-family:Arial,Helvetica,sans-serif;
  color:white;
}

/* CABECERA PORTAL */
.header{
  background:#142028;
  padding:14px;
  text-align:center;
  font-weight:bold;
  letter-spacing:2px;
  font-size:22px;
  box-shadow:0 2px 10px rgba(0,0,0,0.4);
}

/* ZONA JUEGO */
.game-area{
  display:flex;
  justify-content:center;
  padding:30px 10px;
}

/* tama√±o real visible SIEMPRE */
canvas{
  background:#87CEEB;
  border-radius:14px;
  width:min(95vw,480px);
  height:calc(min(95vw,480px)*1.5);
  max-height:80vh;
  box-shadow:0 20px 50px rgba(0,0,0,0.6);
}

/* texto inferior tipo portal */
.info{
  text-align:center;
  opacity:.7;
  margin-top:20px;
  font-size:14px;
}
</style>
</head>
<body>

<div class="header">AZDI RUNNER</div>

<div class="game-area">
  <canvas id="game" width="320" height="480"></canvas>
</div>

<div class="info">Toca la pantalla o haz clic para saltar</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let started=false;
let gameOver=false;

let y=380, vy=0, jumping=false;
let obstacles=[];
let spawnTimer=0;

let speed=4;
let gravity=0.9;
let score=0;
let time=0;

function spawnObstacle(){
  let size=Math.random()<0.35?20:30;
  obstacles.push({x:340,w:size,h:30});
}

function drawBackground(){
  ctx.fillStyle="#87CEEB";
  ctx.fillRect(0,0,320,480);

  ctx.fillStyle="#6b8e23";
  ctx.fillRect(0,420,320,60);

  ctx.strokeStyle="#4e6b18";
  for(let i=0;i<320;i+=40){
    ctx.beginPath();
    ctx.moveTo(i-(time*speed%40),420);
    ctx.lineTo(i+20-(time*speed%40),480);
    ctx.stroke();
  }
}

function drawPlayer(){
  ctx.fillStyle="#ffcc00";
  ctx.fillRect(40,y,30,30);

  ctx.fillStyle="black";
  ctx.fillRect(48,y+8,5,5);
  ctx.fillRect(62,y+8,5,5);

  ctx.beginPath();
  ctx.arc(55,y+20,6,0,Math.PI);
  ctx.stroke();
}

function drawObstacles(){
  ctx.fillStyle="#cc3333";
  obstacles.forEach(o=>{
    o.x-=speed;
    ctx.fillRect(o.x,420-o.h,o.w,o.h);
    if(o.x+o.w<0) score++;
  });
  obstacles=obstacles.filter(o=>o.x>-40);
}

function collision(){
  for(let o of obstacles){
    if(40<o.x+o.w && 70>o.x && y+30>420-o.h) return true;
  }
  return false;
}

function startScreen(){
  drawBackground();
  ctx.fillStyle="black";
  ctx.font="20px Arial";
  ctx.fillText("AZDI RUNNER",85,210);
  ctx.font="14px Arial";
  ctx.fillText("Toca para empezar",90,240);
}

function drawGameOver(){
  ctx.fillStyle="black";
  ctx.font="20px Arial";
  ctx.fillText("GAME OVER",95,220);
  ctx.font="14px Arial";
  ctx.fillText("Puntos: "+score,120,250);
  ctx.fillText("Toca para reiniciar",85,280);
}

function loop(){
  if(!started){startScreen();return;}

  drawBackground();
  ctx.fillStyle="black";
  ctx.fillText("Puntos: "+score,10,20);

  if(gameOver){drawGameOver();return;}

  time+=0.016;
  speed=4+time*0.35;

  spawnTimer++;
  if(spawnTimer>60-Math.min(speed*5,45)){
    spawnObstacle();
    spawnTimer=0;
  }

  vy+=gravity;
  y+=vy;
  if(y>380){y=380;vy=0;jumping=false;}

  drawPlayer();
  drawObstacles();

  if(collision()) gameOver=true;

  requestAnimationFrame(loop);
}

function tap(){
  if(!started){started=true;loop();return;}
  if(gameOver){
    obstacles=[];score=0;speed=4;time=0;y=380;vy=0;gameOver=false;loop();return;
  }
  if(!jumping){vy=-15;jumping=true;}
}

canvas.addEventListener("click",tap);
canvas.addEventListener("touchstart",tap);

startScreen();
</script>

</body>
</html>
