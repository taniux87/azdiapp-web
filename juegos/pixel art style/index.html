<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>AzDi Pixel Art Style</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">

<style>
body{
margin:0;
background:#222;
font-family:Poppins;
color:white;
overflow:hidden;
}

/* CANVAS */
#canvas{
position:absolute;
top:0;left:0;
}

/* PANEL */
#panel{
position:fixed;
bottom:0;left:0;right:0;
background:#f0f0f0;
color:black;
padding:8px;
display:flex;
flex-direction:column;
gap:6px;
}

.row{display:flex;gap:6px;overflow-x:auto}

.color{
width:36px;height:36px;border-radius:50%;
border:2px solid white;cursor:pointer;flex:0 0 auto;
}
.color.active{border:2px solid black;transform:scale(1.2)}

button{
border:none;padding:8px 12px;border-radius:12px;font-weight:bold;
background:#ff4fac;color:white;
}

.tools button.active{background:#4facfe}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<div id="panel">

<div class="row tools">
<button data-tool="pencil">LÃ¡piz</button>
<button data-tool="marker">Rotulador</button>
<button data-tool="spray">Spray</button>
<button data-tool="water">Acuarela</button>
<button data-tool="eraser">Borrar</button>
<button onclick="clearCanvas()">Limpiar</button>
<button onclick="saveImage()">Guardar</button>
</div>

<input type="range" id="size" min="2" max="60" value="10">

<div class="row" id="palette"></div>

</div>

<script>

const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
const palette=document.getElementById("palette");

let drawing=false;
let color="#000";
let tool="pencil";
let lastX=0,lastY=0;

/* CANVAS SIZE */
function resize(){
canvas.width=window.innerWidth;
canvas.height=window.innerHeight-140;
ctx.fillStyle="#fff";
ctx.fillRect(0,0,canvas.width,canvas.height);
}
window.addEventListener("resize",resize);
resize();

/* INPUT */
canvas.addEventListener("pointerdown",e=>{
drawing=true;
[lastX,lastY]=pos(e);
draw(e);
});
canvas.addEventListener("pointermove",e=>drawing&&draw(e));
window.addEventListener("pointerup",()=>drawing=false);

function pos(e){
const r=canvas.getBoundingClientRect();
return [e.clientX-r.left,e.clientY-r.top];
}

/* DIBUJO */
function draw(e){
const [x,y]=pos(e);
const size=document.getElementById("size").value;

if(tool==="eraser"){
ctx.globalCompositeOperation="destination-out";
ctx.beginPath();
ctx.arc(x,y,size/2,0,Math.PI*2);
ctx.fill();
ctx.globalCompositeOperation="source-over";
}

else if(tool==="pencil"){
ctx.strokeStyle=color;
ctx.lineWidth=2;
ctx.lineCap="round";
ctx.beginPath();
ctx.moveTo(lastX,lastY);
ctx.lineTo(x,y);
ctx.stroke();
}

else if(tool==="marker"){
ctx.strokeStyle=color;
ctx.lineWidth=size;
ctx.lineCap="round";
ctx.beginPath();
ctx.moveTo(lastX,lastY);
ctx.lineTo(x,y);
ctx.stroke();
}

else if(tool==="spray"){
for(let i=0;i<15;i++){
const a=Math.random()*Math.PI*2;
const r=Math.random()*size;
ctx.fillStyle=color;
ctx.fillRect(x+Math.cos(a)*r,y+Math.sin(a)*r,1,1);
}
}

else if(tool==="water"){
ctx.globalAlpha=0.1;
ctx.fillStyle=color;
ctx.beginPath();
ctx.arc(x,y,size,0,Math.PI*2);
ctx.fill();
ctx.globalAlpha=1;
}

[lastX,lastY]=[x,y];
}

/* PALETAS */
const palettes={
basico:["#000","#444","#888","#fff","#f00","#0f0","#00f","#ff0"],
pastel:["#ffd1dc","#ffe4b5","#e0ffff","#e6e6fa","#fffacd","#d8bfd8"],
neon:["#ff00ff","#00ffff","#39ff14","#ff073a","#ff6ec7","#00f5ff"],
piel:["#f6d7c3","#eac086","#c68642","#8d5524","#ffdbac","#ffe0bd"]
};

function loadPalette(name){
palette.innerHTML="";
palettes[name].forEach(c=>{
let d=document.createElement("div");
d.className="color";
d.style.background=c;
d.onclick=()=>{
color=c;
document.querySelectorAll(".color").forEach(el=>el.classList.remove("active"));
d.classList.add("active");
};
palette.appendChild(d);
});
}
loadPalette("basico");

/* BOTONES HERRAMIENTA */
document.querySelectorAll(".tools button[data-tool]").forEach(b=>{
b.onclick=()=>{
tool=b.dataset.tool;
document.querySelectorAll(".tools button").forEach(x=>x.classList.remove("active"));
b.classList.add("active");
};
});

/* UTIL */
function clearCanvas(){
ctx.fillStyle="#fff";
ctx.fillRect(0,0,canvas.width,canvas.height);
}

function saveImage(){
const link=document.createElement("a");
link.download="dibujo.png";
link.href=canvas.toDataURL();
link.click();
}

</script>
</body>
</html>
