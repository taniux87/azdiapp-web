<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>AzDi Art Studio</title>

<link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Poppins:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{
--primary:#ff4fac;
--secondary:#4facfe;
--dark:#0a0a0a;
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}

html,body{
margin:0;height:100%;
background:#0a0a0a;
font-family:Poppins;
color:white;
overflow:hidden;
}

/* SPLASH */
#splash{
position:fixed;inset:0;
display:flex;align-items:center;justify-content:center;
background:#0a0a0a;z-index:5;
font-family:"Luckiest Guy";
font-size:3rem;
background:linear-gradient(45deg,#ff4fac,#4facfe);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
}

/* MENU */
#menu{display:none;height:100%;padding:20px;overflow:auto}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:20px}
.card{background:#1a1a1a;border-radius:18px;padding:15px;text-align:center;cursor:pointer;border:2px solid #333}
.card:hover{border-color:var(--primary)}
.title{font-family:"Luckiest Guy";color:var(--secondary);margin:20px 0}

/* GAME */
#game{display:none;height:100%;flex-direction:column}

header{
height:70px;background:#252525;
display:flex;align-items:center;justify-content:space-between;
padding:0 20px;border-bottom:3px solid var(--primary)
}

.btn{
background:var(--primary);
border:none;color:white;padding:10px 18px;border-radius:20px;
font-family:"Luckiest Guy";cursor:pointer
}

.view{flex:1;display:flex;align-items:center;justify-content:center;overflow:hidden;background:#111}

#canvas-wrapper{
display:grid;
background:white;
touch-action:none;
}

.pixel{
width:28px;height:28px;
display:flex;align-items:center;justify-content:center;
font-size:11px;font-weight:bold;color:#aaa;
border:1px solid rgba(0,0,0,.08);
touch-action:none;
}

/* panel */
.controls{
height:170px;background:white;color:black;padding:10px;
display:flex;flex-direction:column;gap:10px
}

.palette{display:flex;gap:10px;overflow:auto}

.color{
min-width:45px;height:45px;border-radius:50%;
border:3px solid white;cursor:pointer;
display:flex;align-items:center;justify-content:center;
font-weight:bold;color:white;text-shadow:1px 1px 2px #000
}
.color.active{border:3px solid black;transform:scale(1.15)}

.tools{display:flex;gap:10px;align-items:center}
</style>
</head>

<body>

<div id="splash">AZDI STUDIO</div>

<div id="menu">
<div class="title">PINTAR POR NUMEROS</div>
<div id="levels" class="grid"></div>

<div class="title">MODO LIBRE</div>
<div class="grid">
<div class="card" onclick="freeMode(20)">LIENZO 20x20</div>
<div class="card" onclick="freeMode(40)">LIENZO GRANDE</div>
</div>
</div>

<div id="game">
<header>
<button class="btn" onclick="location.reload()">SALIR</button>
<div id="percent">0%</div>
<button class="btn" onclick="reset()">CENTRAR</button>
</header>

<div class="view">
<div id="canvas-wrapper"></div>
</div>

<div class="controls">
<div class="tools">
<b>Herramienta:</b>
<button onclick="setBrush(1)">Lápiz</button>
<button onclick="setBrush(3)">Brocha</button>
<b>Tamaño:</b>
<input type="range" min="1" max="5" value="1" id="size">
</div>
<div id="palette" class="palette"></div>
</div>
</div>

<script>
/* COLORES */
const COLORS={
1:"#FF3B30",2:"#000000",3:"#FFCC00",4:"#007AFF",5:"#4CD964",
6:"#5856D6",7:"#FF9500",8:"#FF2D55",9:"#AF52DE",10:"#5AC8FA",
11:"#FFFFFF",12:"#8E8E93",13:"#5E5E5E",14:"#FFCCBC",15:"#8B4513"
};

const FREE_COLORS=[
"#000","#777","#fff","#f00","#ff7f00","#ff0","#0f0","#0ff","#00f","#8b00ff",
"#ff69b4","#a52a2a","#deb887","#ffd700","#98fb98","#20b2aa","#87cefa","#dda0dd"
];

/* MUCHOS DIBUJOS */
const LEVELS=[
{name:"Corazon",grid:[[0,8,0,8,0],[8,8,8,8,8],[8,8,8,8,8],[0,8,8,8,0],[0,0,8,0,0]]},
{name:"Fantasma",grid:[[0,3,3,3,0],[3,3,2,3,3],[3,3,3,3,3],[3,2,3,2,3],[3,3,3,3,3]]},
{name:"Seta",grid:[[0,1,1,1,0],[1,14,14,14,1],[1,14,2,14,1],[0,1,1,1,0]]},
{name:"Helado",grid:[[0,7,7,7,0],[7,7,7,7,7],[7,7,7,7,7],[0,15,15,15,0],[0,15,15,15,0]]},
{name:"Cara",grid:[[0,3,3,3,0],[3,2,3,2,3],[3,3,3,3,3],[3,3,3,3,3],[0,3,3,3,0]]}
];

let free=false,painting=false,selected=1,brush=1;

/* INIT */
window.onload=()=>{
setTimeout(()=>{splash.style.display="none";menu.style.display="block"},700);
LEVELS.forEach((l,i)=>levels.innerHTML+=`<div class="card" onclick="start(${i})">${l.name}</div>`);
};

/* NUMEROS */
function start(i){
free=false;
menu.style.display="none";game.style.display="flex";
drawNumbers(LEVELS[i].grid);
paletteNumbers(LEVELS[i].grid);
}

function drawNumbers(grid){
canvas-wrapper.innerHTML="";
canvas-wrapper.style.gridTemplateColumns=`repeat(${grid[0].length},28px)`;

grid.forEach(row=>{
row.forEach(v=>{
let p=document.createElement("div");
p.className="pixel";
if(v!==0){p.dataset.n=v;p.textContent=v}
p.onpointerdown=()=>paintNumber(p);
canvas-wrapper.appendChild(p);
});
});
}

function paintNumber(p){
if(Number(p.dataset.n)===selected){
p.style.background=COLORS[selected];
p.textContent="";
p.dataset.ok=1;
update();
}
}

function paletteNumbers(grid){
palette.innerHTML="";
[...new Set(grid.flat())].filter(v=>v!=0).forEach(n=>{
let c=document.createElement("div");
c.className="color";
c.style.background=COLORS[n];
c.textContent=n;
c.onclick=()=>{selected=n;document.querySelectorAll(".color").forEach(e=>e.classList.remove("active"));c.classList.add("active");};
palette.appendChild(c);
});
}

function update(){
let t=document.querySelectorAll(".pixel[data-n]").length;
let d=document.querySelectorAll(".pixel[data-ok]").length;
percent.textContent=Math.floor(d/t*100)+"%";
}

/* LIBRE */
function freeMode(size){
free=true;
menu.style.display="none";game.style.display="flex";

canvas-wrapper.innerHTML="";
canvas-wrapper.style.gridTemplateColumns=`repeat(${size},18px)`;

for(let y=0;y<size;y++){
for(let x=0;x<size;x++){
let p=document.createElement("div");
p.className="pixel";
p.style.background="#fff";
p.dataset.x=x;p.dataset.y=y;

p.onpointerdown=()=>{painting=true;paintFree(x,y)};
p.onpointerenter=()=>painting&&paintFree(x,y);

canvas-wrapper.appendChild(p);
}}
window.onpointerup=()=>painting=false;
paletteFree();
}

function paintFree(x,y){
document.querySelectorAll(".pixel").forEach(p=>{
let dx=p.dataset.x-x;
let dy=p.dataset.y-y;
if(Math.sqrt(dx*dx+dy*dy)<=brush*size.value)p.style.background=selected;
});
}

function paletteFree(){
palette.innerHTML="";
FREE_COLORS.forEach(col=>{
let c=document.createElement("div");
c.className="color";
c.style.background=col;
c.onclick=()=>{selected=col;document.querySelectorAll(".color").forEach(e=>e.classList.remove("active"));c.classList.add("active");};
palette.appendChild(c);
});
}

function setBrush(b){brush=b}
function reset(){canvas-wrapper.style.transform="scale(1)"}
</script>

</body>
</html>
