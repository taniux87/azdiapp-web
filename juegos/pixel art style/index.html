<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>AzDi Art Studio</title>

<link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Poppins:wght@400;700&display=swap" rel="stylesheet">

<style>
body{
margin:0;
background:#0a0a0a;
font-family:Poppins;
color:white;
overflow:hidden;
}

/* MENÚ */
#menu{
position:absolute;inset:0;
padding:20px;overflow:auto;
}

.title{
font-family:"Luckiest Guy";
color:#4facfe;
font-size:24px;
margin:20px 0;
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(120px,1fr));
gap:15px;
}

.card{
background:#1a1a1a;
padding:15px;
border-radius:16px;
text-align:center;
border:2px solid #333;
cursor:pointer;
}
.card:hover{border-color:#ff4fac}

/* JUEGO */
#game{display:none;height:100vh;flex-direction:column}

header{
height:60px;background:#222;
display:flex;align-items:center;justify-content:space-between;
padding:0 15px;
}

.btn{
background:#ff4fac;border:none;color:white;
padding:8px 16px;border-radius:20px;font-weight:bold;
}

#canvas{
flex:1;background:white;
touch-action:none;
position:relative;
}

.pixel{
position:absolute;
}

.controls{
height:120px;background:#eee;color:black;padding:8px;
display:flex;flex-direction:column;gap:6px;
}

.palette{display:flex;gap:8px;overflow:auto}

.color{
width:36px;height:36px;border-radius:50%;
border:2px solid white;
cursor:pointer;
}
.color.active{border:2px solid black;transform:scale(1.15)}
</style>
</head>

<body>

<div id="menu">
<div class="title">Dibujos</div>
<div id="levels" class="grid"></div>

<div class="title">Lienzo libre</div>
<div class="grid">
<div class="card" onclick="startFree(32)">Pequeño</div>
<div class="card" onclick="startFree(48)">Medio</div>
<div class="card" onclick="startFree(64)">Grande</div>
</div>
</div>

<div id="game">
<header>
<button class="btn" onclick="exitGame()">Salir</button>
<div id="percent">0%</div>
<button class="btn" onclick="clearCanvas()">Borrar</button>
</header>

<canvas id="canvas"></canvas>

<div class="controls">
<input type="range" id="size" min="4" max="30" value="12">
<div id="palette" class="palette"></div>
</div>
</div>

<script>

/* ===== COLORES ===== */

const FREE_COLORS=[
"#000","#444","#888","#fff","#f00","#ff7f00","#ff0","#0f0","#0ff","#00f","#8b00ff",
"#ff69b4","#a52a2a","#deb887","#ffd700","#98fb98","#20b2aa","#87cefa","#dda0dd"
];

/* ===== DIBUJOS ===== */

const DRAWINGS=[
{
name:"Cara Feliz",
data:[
[0,1,1,1,0],
[1,0,1,0,1],
[1,1,1,1,1],
[1,0,0,0,1],
[0,1,1,1,0]
]
},
{
name:"Corazon",
data:[
[0,1,0,1,0],
[1,1,1,1,1],
[1,1,1,1,1],
[0,1,1,1,0],
[0,0,1,0,0]
]
}
];

/* ===== VARIABLES ===== */

const menu=document.getElementById("menu");
const game=document.getElementById("game");
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
const palette=document.getElementById("palette");
const percent=document.getElementById("percent");
let drawing=false;
let color="#000";
let freeMode=true;

/* ===== MENU ===== */

DRAWINGS.forEach((d,i)=>{
const div=document.createElement("div");
div.className="card";
div.textContent=d.name;
div.onclick=()=>startDrawing(i);
levels.appendChild(div);
});

/* ===== LIBRE ===== */

function startFree(size){
freeMode=true;
menu.style.display="none";
game.style.display="flex";
resizeCanvas();
buildPalette();
clearCanvas();
}

function resizeCanvas(){
canvas.width=window.innerWidth;
canvas.height=window.innerHeight-180;
}

/* ===== DIBUJO LIBRE ===== */

canvas.addEventListener("pointerdown",e=>{drawing=true;paint(e)});
canvas.addEventListener("pointermove",e=>drawing&&paint(e));
window.addEventListener("pointerup",()=>drawing=false);

function paint(e){
const rect=canvas.getBoundingClientRect();
const x=e.clientX-rect.left;
const y=e.clientY-rect.top;
ctx.fillStyle=color;
ctx.beginPath();
ctx.arc(x,y,size.value/2,0,Math.PI*2);
ctx.fill();
}

/* ===== PALETA ===== */

function buildPalette(){
palette.innerHTML="";
FREE_COLORS.forEach(c=>{
const div=document.createElement("div");
div.className="color";
div.style.background=c;
div.onclick=()=>{
color=c;
document.querySelectorAll(".color").forEach(el=>el.classList.remove("active"));
div.classList.add("active");
};
palette.appendChild(div);
});
}

/* ===== UTIL ===== */

function clearCanvas(){
ctx.fillStyle="#ffffff";
ctx.fillRect(0,0,canvas.width,canvas.height);
}

function exitGame(){
game.style.display="none";
menu.style.display="block";
}

window.addEventListener("resize",resizeCanvas);

</script>

</body>
</html>
