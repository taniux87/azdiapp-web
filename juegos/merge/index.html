<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AzDi Merge</title>

<style>

body{
margin:0;
font-family:Arial,Helvetica,sans-serif;
background:
radial-gradient(circle at 50% 20%, #0ff3 0%, transparent 40%),
linear-gradient(#02131a,#000);
color:white;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
overflow:hidden;
}

/* PANEL */
#game{
width:380px;
height:600px;
background:linear-gradient(#dfe9f3,#ffffff);
border-radius:25px;
position:relative;
overflow:hidden;
box-shadow:0 0 40px #00f7ff88;
}

/* SUELO */
#ground{
position:absolute;
bottom:0;
width:100%;
height:120px;
background:linear-gradient(#8fd37c,#4b8a41);
}

/* BLOQUES */
.block{
position:absolute;
width:60px;
height:60px;
border-radius:12px;
display:flex;
align-items:center;
justify-content:center;
flex-direction:column;
font-weight:bold;
color:#222;
box-shadow:0 10px 15px #0005;
transition:transform .08s;
}

/* CARA */
.face{
font-size:22px;
line-height:18px;
text-align:center;
}

/* HUD */
#ui{
position:absolute;
top:10px;
left:10px;
right:10px;
display:flex;
justify-content:space-between;
font-weight:bold;
}

/* NEXT */
#next{
background:#0006;
padding:6px 12px;
border-radius:10px;
}

/* OVERLAY */
#start{
position:absolute;
inset:0;
background:#000a;
backdrop-filter:blur(6px);
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
text-align:center;
padding:30px;
}

button{
margin-top:20px;
padding:12px 25px;
font-size:18px;
border:none;
border-radius:12px;
background:linear-gradient(45deg,#00e5ff,#6a5cff);
color:white;
box-shadow:0 0 15px #00f7ff;
}

</style>
</head>

<body>

<div id="game">

<div id="ui">
<div>Puntos: <span id="score">0</span></div>
<div id="next">Siguiente: 1</div>
</div>

<div id="ground"></div>

<div id="start">
<h2>ğŸ§  CÃ³mo jugar</h2>
<p>
Suelta bloques.<br><br>
Los bloques IGUALES se fusionan.<br>
Cada fusiÃ³n crea uno mayor.<br><br>
No dejes que lleguen arriba.
</p>
<button onclick="startGame()">Jugar</button>
</div>

</div>

<script>

const game = document.getElementById("game");
const scoreEl = document.getElementById("score");
const nextEl = document.getElementById("next");
const startPanel = document.getElementById("start");

let blocks=[];
let score=0;
let nextLevel=1;
let running=false;

const gravity=0.35;
const ground=480;

const colors={
1:"#ffe066",
2:"#ffd43b",
3:"#fab005",
4:"#ff922b",
5:"#ff6b6b",
6:"#f06595",
7:"#845ef7",
8:"#5c7cfa",
9:"#339af0"
};

const faces={
1:"ğŸ™‚",
2:"ğŸ˜€",
3:"ğŸ˜",
4:"ğŸ˜†",
5:"ğŸ¤¯",
6:"ğŸ‘‘",
7:"ğŸŒŸ",
8:"ğŸš€",
9:"ğŸ’"
};

function startGame(){
startPanel.style.display="none";
running=true;
loop();
}

function createBlock(x){

const lvl=nextLevel;
nextLevel=Math.min(1+Math.floor(Math.random()*3),9);
nextEl.innerText="Siguiente: "+nextLevel;

const el=document.createElement("div");
el.className="block";
el.style.background=colors[lvl];
el.innerHTML=`<div class="face">${faces[lvl]}<br>${lvl}</div>`;
game.appendChild(el);

blocks.push({
x:x-30,
y:0,
vy:0,
lvl:lvl,
el:el
});
}

game.addEventListener("click",e=>{
if(!running)return;
createBlock(e.offsetX);
});

function loop(){

blocks.forEach(b=>{
b.vy+=gravity;
b.y+=b.vy;

if(b.y>ground-60){
b.y=ground-60;
b.vy=0;
}

b.el.style.transform=`translate(${b.x}px,${b.y}px)`;
});

merge();
checkLose();

if(running)requestAnimationFrame(loop);
}

function merge(){

for(let i=0;i<blocks.length;i++){
for(let j=i+1;j<blocks.length;j++){

let a=blocks[i];
let b=blocks[j];

if(a.lvl!==b.lvl)continue;

let dx=a.x-b.x;
let dy=a.y-b.y;

if(Math.hypot(dx,dy)<55){

a.lvl++;
score+=a.lvl*10;
scoreEl.innerText=score;

a.el.style.background=colors[a.lvl]||"#fff";
a.el.innerHTML=`<div class="face">${faces[a.lvl]||"ğŸ’"}<br>${a.lvl}</div>`;

b.el.remove();
blocks.splice(j,1);
j--;
}

}
}

}

function checkLose(){
for(let b of blocks){
if(b.y<40){
running=false;
startPanel.style.display="flex";
startPanel.innerHTML=`
<h2>ğŸ’¥ Game Over</h2>
<p>Puntos: ${score}</p>
<button onclick="location.reload()">Reintentar</button>
`;
}
}
}

</script>

</body>
</html>
