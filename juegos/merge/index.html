<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AzDi Merge</title>

<style>
html,body{
  margin:0;
  height:100%;
  background:#0e1a1f;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Arial;
  color:white;
}

/* contenedor ocupa pantalla */
.wrapper{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  height:100%;
  width:100%;
}

/* juego grande siempre visible */
canvas{
  background:#e8f4ff;
  border-radius:18px;
  width:min(94vw,520px);
  height:calc(min(94vw,520px)*1.4);
  max-height:85vh;
  box-shadow:0 25px 60px rgba(0,0,0,0.7);
}

.title{
  position:absolute;
  top:12px;
  font-weight:bold;
  letter-spacing:2px;
  opacity:.8;
}
</style>
</head>
<body>

<div class="title">AZDI MERGE</div>

<div class="wrapper">
  <canvas id="game" width="300" height="420"></canvas>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let current={x:150,y:40,size:28,falling:false};
let blocks=[];

function drawBlock(b){
  ctx.fillStyle="#ffd43b";
  ctx.fillRect(b.x-b.size/2,b.y-b.size/2,b.size,b.size);

  ctx.fillStyle="#222";
  ctx.fillRect(b.x-6,b.y-4,4,4);
  ctx.fillRect(b.x+2,b.y-4,4,4);
  ctx.beginPath();
  ctx.arc(b.x,b.y+4,6,0,Math.PI);
  ctx.stroke();
}

function loop(){
  ctx.clearRect(0,0,300,420);

  ctx.fillStyle="#b5d3e7";
  ctx.fillRect(0,380,300,40);

  blocks.forEach(drawBlock);

  if(current.falling){
    current.y+=3;

    if(current.y+current.size/2>=380){
      current.y=380-current.size/2;
      blocks.push({...current});
      reset();
    }

    blocks.forEach(b=>{
      if(Math.abs(current.x-b.x)<current.size &&
         Math.abs(current.y-b.y)<current.size){
          current.y=b.y-current.size;
          blocks.push({...current});
          reset();
      }
    });
  }

  drawBlock(current);
  requestAnimationFrame(loop);
}

function reset(){current={x:150,y:40,size:28,falling:false};}

canvas.addEventListener("mousemove",e=>{
  if(current.falling)return;
  const r=canvas.getBoundingClientRect();
  current.x=(e.clientX-r.left)*(300/r.width);
});

canvas.addEventListener("touchmove",e=>{
  if(current.falling)return;
  const r=canvas.getBoundingClientRect();
  current.x=(e.touches[0].clientX-r.left)*(300/r.width);
});

canvas.addEventListener("click",()=>current.falling=true);
canvas.addEventListener("touchstart",()=>current.falling=true);

loop();
</script>

</body>
</html>
