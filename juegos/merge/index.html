<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>AzDi Merge</title>

<style>
body{
margin:0;
overflow:hidden;
background:#05070d;
font-family:Segoe UI,Arial;
color:white;
}

/* estrellas */
canvas#stars{
position:fixed;
top:0;
left:0;
z-index:-1;
}

/* zona juego */
#game{
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
height:100vh;
}

#score{
color:#00f0ff;
text-shadow:0 0 10px #00f0ff;
margin-bottom:10px;
font-size:22px;
letter-spacing:2px;
}

#board{
background:rgba(20,25,35,.8);
border-radius:20px;
box-shadow:0 0 30px #00f0ff33;
}

/* menu inicio */
#menu{
position:fixed;
inset:0;
display:flex;
align-items:center;
justify-content:center;
backdrop-filter:blur(6px);
}

.card{
background:linear-gradient(180deg,#0b0f18,#121826);
padding:30px;
border-radius:20px;
text-align:center;
width:260px;
box-shadow:0 0 40px #00f0ff44;
animation:float 4s ease-in-out infinite;
}

@keyframes float{
0%,100%{transform:translateY(0)}
50%{transform:translateY(-10px)}
}

.title{
font-size:26px;
color:#00f0ff;
text-shadow:0 0 15px #00f0ff;
margin-bottom:15px;
}

.desc{
opacity:.85;
margin-bottom:20px;
line-height:1.4;
}

button{
background:linear-gradient(90deg,#00f0ff,#ff00d4);
border:none;
padding:12px 26px;
border-radius:12px;
color:white;
font-weight:bold;
cursor:pointer;
box-shadow:0 0 20px #00f0ff;
transition:.2s;
}
button:hover{
transform:scale(1.08);
box-shadow:0 0 35px #ff00d4;
}
</style>
</head>

<body>

<canvas id="stars"></canvas>

<div id="menu">
<div class="card">
<div class="title">AzDi Merge</div>
<div class="desc">
Fusiona criaturas iguales para evolucionarlas.<br><br>
No dejes que la torre llegue arriba ðŸ‘€
</div>
<button onclick="start()">JUGAR</button>
</div>
</div>

<div id="game" style="display:none">
<div id="score">Puntos: 0</div>
<canvas id="board" width="320" height="480"></canvas>
</div>

<script>
/* ---------- estrellas ---------- */
const starCanvas=document.getElementById("stars");
const sctx=starCanvas.getContext("2d");
let stars=[];

function resizeStars(){
starCanvas.width=innerWidth;
starCanvas.height=innerHeight;
}
window.onresize=resizeStars;
resizeStars();

for(let i=0;i<120;i++){
stars.push({
x:Math.random()*starCanvas.width,
y:Math.random()*starCanvas.height,
r:Math.random()*2,
c:`hsl(${Math.random()*360}deg 100% 70%)`
});
}

function drawStars(){
sctx.clearRect(0,0,starCanvas.width,starCanvas.height);
for(const s of stars){
sctx.beginPath();
sctx.fillStyle=s.c;
sctx.shadowBlur=10;
sctx.shadowColor=s.c;
sctx.arc(s.x,s.y,s.r,0,Math.PI*2);
sctx.fill();
}
requestAnimationFrame(drawStars);
}
drawStars();

/* ---------- juego ---------- */
const canvas=document.getElementById("board");
const ctx=canvas.getContext("2d");

let blocks=[];
let score=0;
const size=48;
const gravity=.35;

const creatures=["ðŸ¥š","ðŸŸ¢","ðŸ±","ðŸ¤–","ðŸ‘½","ðŸ˜ˆ","ðŸ‰","ðŸŒŒ","ðŸ§ ","ðŸ‘‘"];
const colors=["#ffd166","#ef476f","#06d6a0","#118ab2","#8338ec","#ff006e","#fb5607","#3a86ff","#00f0ff","#ff00d4"];

class Block{
constructor(x,n){
this.x=x;
this.y=0;
this.vy=0;
this.n=n;
this.merged=false;
}

update(){
this.vy+=gravity;
this.y+=this.vy;

if(this.y+size>canvas.height){
this.y=canvas.height-size;
this.vy=0;
}
}

draw(){
ctx.shadowBlur=25;
ctx.shadowColor=colors[this.n%colors.length];

ctx.fillStyle=colors[this.n%colors.length];
ctx.beginPath();
ctx.roundRect(this.x,this.y,size,size,14);
ctx.fill();

ctx.shadowBlur=0;
ctx.font="26px serif";
ctx.textAlign="center";
ctx.textBaseline="middle";
ctx.fillText(creatures[this.n%creatures.length],this.x+size/2,this.y+size/2);
}
}

function collide(a,b){
return a.x<b.x+size&&a.x+size>b.x&&a.y<b.y+size&&a.y+size>b.y;
}

function merge(){
for(let i=0;i<blocks.length;i++){
for(let j=i+1;j<blocks.length;j++){
let a=blocks[i],b=blocks[j];
if(!a.merged&&!b.merged&&a.n===b.n&&collide(a,b)&&Math.abs(a.vy)<1&&Math.abs(b.vy)<1){
a.merged=b.merged=true;
blocks.splice(j,1);
blocks.splice(i,1);
blocks.push(new Block(a.x,a.n+1));
score+=10;
document.getElementById("score").innerText="Puntos: "+score;
return;
}
}
}
}

function update(){
ctx.clearRect(0,0,canvas.width,canvas.height);

for(const b of blocks)b.update();
merge();
for(const b of blocks)b.draw();

requestAnimationFrame(update);
}

canvas.addEventListener("click",e=>{
const rect=canvas.getBoundingClientRect();
const x=e.clientX-rect.left-size/2;
blocks.push(new Block(Math.max(0,Math.min(canvas.width-size,x)),0));
});

function start(){
document.getElementById("menu").style.display="none";
document.getElementById("game").style.display="flex";
update();
}
</script>

</body>
</html>
